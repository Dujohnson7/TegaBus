{"ast":null,"code":"var _jsxFileName = \"D:\\\\AUCA\\\\AUCA INNOVATION CENTER\\\\WebTech\\\\Final\\\\TegaBus\\\\frontend\\\\tegaPortal\\\\src\\\\components\\\\Headers\\\\HeaderStats.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport CardStats from \"components/Cards/CardStats.js\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function HeaderStats() {\n  _s();\n  const [stats, setStats] = useState({\n    tickets: 0,\n    buses: 0,\n    destinations: 0,\n    employees: 0\n  });\n  const [loading, setLoading] = useState(true);\n  const API_URL = process.env.REACT_APP_API_URL || \"http://localhost:5000\";\n  useEffect(() => {\n    const fetchDashboardData = async () => {\n      try {\n        const token = localStorage.getItem(\"token\");\n        const expressId = localStorage.getItem(\"expressId\");\n        const headers = {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n          \"X-Express-Id\": expressId || \"\"\n        };\n        const ticketResponse = await fetch(`${API_URL}/api/dashboard/current-month`, {\n          method: \"GET\",\n          headers\n        });\n        if (!ticketResponse.ok) throw new Error(\"Failed to fetch tickets\");\n        const tickets = await ticketResponse.json();\n        const currentMonth = new Date().getMonth();\n        const currentYear = new Date().getFullYear();\n        const ticketsThisMonth = tickets.filter(ticket => {\n          const ticketDate = new Date(ticket.createdAt);\n          return ticketDate.getMonth() === currentMonth && ticketDate.getFullYear() === currentYear;\n        });\n        const busResponse = await fetch(`${API_URL}/api/dashboard/bus`, {\n          method: \"GET\",\n          headers\n        });\n        if (!busResponse.ok) throw new Error(\"Failed to fetch buses\");\n        const buses = await busResponse.json();\n        const destinationResponse = await fetch(`${API_URL}/api/dashboard/destination`, {\n          method: \"GET\",\n          headers\n        });\n        if (!destinationResponse.ok) throw new Error(\"Failed to fetch destinations\");\n        const destinations = await destinationResponse.json();\n        const employeeResponse = await fetch(`${API_URL}/api/dashboard/employee`, {\n          method: \"GET\",\n          headers\n        });\n        if (!employeeResponse.ok) throw new Error(\"Failed to fetch employees\");\n        const employees = await employeeResponse.json();\n        setStats({\n          tickets: ticketsThisMonth.length,\n          buses: buses.length,\n          destinations: destinations.length,\n          employees: employees.length\n        });\n        setLoading(false);\n      } catch (error) {\n        console.error(\"Error fetching dashboard data:\", error);\n        setLoading(false);\n      }\n    };\n    fetchDashboardData();\n  }, []);\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center p-6\",\n      children: \"Loading dashboard...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative bg-lightBlue-600 md:pt-32 pb-32 pt-12\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"px-4 md:px-10 mx-auto w-full\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-wrap\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-full lg:w-6/12 xl:w-3/12 px-4\",\n              children: /*#__PURE__*/_jsxDEV(CardStats, {\n                statSubtitle: \"Tickets Sold\",\n                statTitle: stats.tickets.toString(),\n                statDescription: \"This Month\",\n                statIconName: \"far fa-chart-bar\",\n                statIconColor: \"bg-red-500\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 92,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-full lg:w-6/12 xl:w-3/12 px-4\",\n              children: /*#__PURE__*/_jsxDEV(CardStats, {\n                statSubtitle: \"Buses\",\n                statTitle: stats.buses.toString(),\n                statDescription: \"Total Active\",\n                statIconName: \"fas fa-bus\",\n                statIconColor: \"bg-lightBlue-500\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 101,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-full lg:w-6/12 xl:w-3/12 px-4\",\n              children: /*#__PURE__*/_jsxDEV(CardStats, {\n                statSubtitle: \"Destinations\",\n                statTitle: stats.destinations.toString(),\n                statDescription: \"Total Active\",\n                statIconName: \"fas fa-chart-pie\",\n                statIconColor: \"bg-orange-500\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 110,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-full lg:w-6/12 xl:w-3/12 px-4\",\n              children: /*#__PURE__*/_jsxDEV(CardStats, {\n                statSubtitle: \"Employees\",\n                statTitle: stats.employees.toString(),\n                statDescription: \"Total Active\",\n                statIconName: \"fas fa-users\",\n                statIconColor: \"bg-pink-500\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 119,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n_s(HeaderStats, \"wtyrsJlsDhNwNp1N9+xBWVPk3qQ=\");\n_c = HeaderStats;\nvar _c;\n$RefreshReg$(_c, \"HeaderStats\");","map":{"version":3,"names":["React","useState","useEffect","CardStats","jsxDEV","_jsxDEV","Fragment","_Fragment","HeaderStats","_s","stats","setStats","tickets","buses","destinations","employees","loading","setLoading","API_URL","process","env","REACT_APP_API_URL","fetchDashboardData","token","localStorage","getItem","expressId","headers","Authorization","ticketResponse","fetch","method","ok","Error","json","currentMonth","Date","getMonth","currentYear","getFullYear","ticketsThisMonth","filter","ticket","ticketDate","createdAt","busResponse","destinationResponse","employeeResponse","length","error","console","className","children","fileName","_jsxFileName","lineNumber","columnNumber","statSubtitle","statTitle","toString","statDescription","statIconName","statIconColor","_c","$RefreshReg$"],"sources":["D:/AUCA/AUCA INNOVATION CENTER/WebTech/Final/TegaBus/frontend/tegaPortal/src/components/Headers/HeaderStats.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport CardStats from \"components/Cards/CardStats.js\";\n\nexport default function HeaderStats() {\n  const [stats, setStats] = useState({\n    tickets: 0,\n    buses: 0,\n    destinations: 0,\n    employees: 0,\n  });\n  const [loading, setLoading] = useState(true);\n  const API_URL = process.env.REACT_APP_API_URL || \"http://localhost:5000\";\n\n  useEffect(() => {\n    const fetchDashboardData = async () => {\n      try {\n        const token = localStorage.getItem(\"token\");\n        const expressId = localStorage.getItem(\"expressId\");\n\n        const headers = {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n          \"X-Express-Id\": expressId || \"\",\n        };\n \n        const ticketResponse = await fetch(`${API_URL}/api/dashboard/current-month`, {\n          method: \"GET\",\n          headers,\n        });\n        if (!ticketResponse.ok) throw new Error(\"Failed to fetch tickets\");\n        const tickets = await ticketResponse.json(); \n        const currentMonth = new Date().getMonth();\n        const currentYear = new Date().getFullYear();\n        const ticketsThisMonth = tickets.filter((ticket) => {\n          const ticketDate = new Date(ticket.createdAt);\n          return (\n            ticketDate.getMonth() === currentMonth &&\n            ticketDate.getFullYear() === currentYear\n          );\n        });\n \n        const busResponse = await fetch(`${API_URL}/api/dashboard/bus`, {\n          method: \"GET\",\n          headers,\n        });\n        if (!busResponse.ok) throw new Error(\"Failed to fetch buses\");\n        const buses = await busResponse.json();\n \n        const destinationResponse = await fetch(`${API_URL}/api/dashboard/destination`, {\n          method: \"GET\",\n          headers,\n        });\n        if (!destinationResponse.ok) throw new Error(\"Failed to fetch destinations\");\n        const destinations = await destinationResponse.json();\n \n        const employeeResponse = await fetch(`${API_URL}/api/dashboard/employee`, {\n          method: \"GET\",\n          headers,\n        });\n        if (!employeeResponse.ok) throw new Error(\"Failed to fetch employees\");\n        const employees = await employeeResponse.json();\n \n        setStats({\n          tickets: ticketsThisMonth.length,\n          buses: buses.length,\n          destinations: destinations.length,\n          employees: employees.length,\n        });\n        setLoading(false);\n      } catch (error) {\n        console.error(\"Error fetching dashboard data:\", error);\n        setLoading(false);\n      }\n    };\n\n    fetchDashboardData();\n  }, []);\n\n  if (loading) {\n    return <div className=\"text-center p-6\">Loading dashboard...</div>;\n  }\n\n  return (\n    <>\n      {/* Header */}\n      <div className=\"relative bg-lightBlue-600 md:pt-32 pb-32 pt-12\">\n        <div className=\"px-4 md:px-10 mx-auto w-full\">\n          <div>\n            {/* Card stats */}\n            <div className=\"flex flex-wrap\">\n              <div className=\"w-full lg:w-6/12 xl:w-3/12 px-4\">\n                <CardStats\n                  statSubtitle=\"Tickets Sold\"\n                  statTitle={stats.tickets.toString()}\n                  statDescription=\"This Month\"\n                  statIconName=\"far fa-chart-bar\"\n                  statIconColor=\"bg-red-500\"\n                />\n              </div>\n              <div className=\"w-full lg:w-6/12 xl:w-3/12 px-4\">\n                <CardStats\n                  statSubtitle=\"Buses\"\n                  statTitle={stats.buses.toString()}\n                  statDescription=\"Total Active\"\n                  statIconName=\"fas fa-bus\"\n                  statIconColor=\"bg-lightBlue-500\"\n                />\n              </div>\n              <div className=\"w-full lg:w-6/12 xl:w-3/12 px-4\">\n                <CardStats\n                  statSubtitle=\"Destinations\"\n                  statTitle={stats.destinations.toString()}\n                  statDescription=\"Total Active\"\n                  statIconName=\"fas fa-chart-pie\"\n                  statIconColor=\"bg-orange-500\"\n                />\n              </div>\n              <div className=\"w-full lg:w-6/12 xl:w-3/12 px-4\">\n                <CardStats\n                  statSubtitle=\"Employees\"\n                  statTitle={stats.employees.toString()}\n                  statDescription=\"Total Active\"\n                  statIconName=\"fas fa-users\"\n                  statIconColor=\"bg-pink-500\"\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}