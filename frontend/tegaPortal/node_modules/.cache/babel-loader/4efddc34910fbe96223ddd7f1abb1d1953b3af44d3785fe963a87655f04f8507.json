{"ast":null,"code":"var _jsxFileName = \"D:\\\\AUCA\\\\AUCA INNOVATION CENTER\\\\WebTech\\\\Final\\\\TegaBus\\\\frontend\\\\tegaPortal\\\\src\\\\views\\\\admin\\\\Reports.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport CardStats from \"components/Cards/CardStats.js\";\nimport CardLineChart from \"components/Cards/CardLineChart.js\";\nimport CardBarChart from \"components/Cards/CardBarChart.js\";\nimport CardTable from \"components/Cards/CardTable.js\";\nimport jsPDF from \"jspdf\";\nimport autoTable from \"jspdf-autotable\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Reports() {\n  _s();\n  const [reportType] = useState(\"overview\");\n  const [startDate, setStartDate] = useState(\"\");\n  const [endDate, setEndDate] = useState(\"\");\n  const [totalRevenue, setTotalRevenue] = useState(0);\n  const [totalTickets, setTotalTickets] = useState(0);\n  const [revenueData, setRevenueData] = useState({\n    labels: [],\n    datasets: []\n  });\n  const [ticketSalesData, setTicketSalesData] = useState({\n    labels: [],\n    datasets: []\n  });\n  const [tableData, setTableData] = useState([]);\n\n  // Normalize a date string to YYYY-MM-DD (avoid TZ dupes)\n  const toYMD = d => {\n    const dt = new Date(d);\n    dt.setHours(0, 0, 0, 0);\n    return dt.toISOString().slice(0, 10);\n  };\n  const handleGenerateReport = async () => {\n    if (!startDate || !endDate) {\n      alert(\"Please select both start and end dates\");\n      return;\n    }\n    try {\n      const startMillis = new Date(startDate).getTime();\n      const endMillis = new Date(endDate).getTime();\n      const token = localStorage.getItem(\"token\");\n      const response = await fetch(`http://localhost:5000/api/reports/date-range?start=${startMillis}&end=${endMillis}`, {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`\n        }\n      });\n      if (!response.ok) {\n        throw new Error(\"Failed to fetch report data\");\n      }\n      const raw = await response.json();\n\n      // --- Group by Date (YYYY-MM-DD) + Destination (from → to) ---\n      const grouped = {};\n      for (const t of raw) {\n        var _t$schedule;\n        const date = toYMD(t.date);\n\n        // Safely read destination object\n        const destObj = ((_t$schedule = t.schedule) === null || _t$schedule === void 0 ? void 0 : _t$schedule.destination) || t.destination ||\n        // fallback if your DTO differs\n        {};\n        const from = destObj.fromLocation || destObj.from || \"Unknown From\";\n        const to = destObj.toLocation || destObj.to || \"Unknown To\";\n        const payState = (t.payState || \"\").toUpperCase();\n        const key = `${date}::${from}::${to}`;\n        if (!grouped[key]) {\n          grouped[key] = {\n            date,\n            destination: {\n              fromLocation: from,\n              toLocation: to\n            },\n            tickets: 0,\n            revenue: 0,\n            paidTickets: 0,\n            unpaidTickets: 0\n          };\n        }\n        grouped[key].tickets += 1;\n        grouped[key].revenue += Number(t.totalAmount || 0);\n        if (payState === \"PAID\") {\n          grouped[key].paidTickets += 1;\n        } else {\n          grouped[key].unpaidTickets += 1;\n        }\n      }\n      const groupedData = Object.values(grouped);\n\n      // Totals\n      setTotalRevenue(groupedData.reduce((sum, r) => sum + r.revenue, 0));\n      setTotalTickets(groupedData.reduce((sum, r) => sum + r.tickets, 0));\n      setTableData(groupedData);\n\n      // --- Build charts per DAY (aggregate all destinations per day) ---\n      const byDay = {};\n      for (const row of groupedData) {\n        if (!byDay[row.date]) {\n          byDay[row.date] = {\n            revenue: 0,\n            paid: 0,\n            unpaid: 0\n          };\n        }\n        byDay[row.date].revenue += row.revenue;\n        byDay[row.date].paid += row.paidTickets;\n        byDay[row.date].unpaid += row.unpaidTickets;\n      }\n      const labels = Object.keys(byDay).sort((a, b) => new Date(a) - new Date(b));\n      const revenueSeries = labels.map(d => byDay[d].revenue);\n      const paidSeries = labels.map(d => byDay[d].paid);\n      const unpaidSeries = labels.map(d => byDay[d].unpaid);\n      setRevenueData({\n        labels,\n        datasets: [{\n          label: \"Revenue (RWF)\",\n          data: revenueSeries,\n          // colors left to chart component defaults; if it requires, they are here:\n          borderColor: \"rgb(59,130,246)\",\n          backgroundColor: \"rgba(59,130,246,0.1)\",\n          tension: 0.3\n        }]\n      });\n      setTicketSalesData({\n        labels,\n        datasets: [{\n          label: \"Paid Tickets\",\n          data: paidSeries,\n          backgroundColor: \"rgba(34,197,94,0.8)\"\n        }, {\n          label: \"Unpaid Tickets\",\n          data: unpaidSeries,\n          backgroundColor: \"rgba(239,68,68,0.8)\"\n        }]\n      });\n      alert(\"Report generated successfully!\");\n    } catch (error) {\n      console.error(error);\n      alert(\"Error generating report: \" + error.message);\n    }\n  };\n  const handleExportReport = () => {\n    if (tableData.length === 0) {\n      alert(\"Generate a report first.\");\n      return;\n    }\n    const doc = new jsPDF();\n\n    // Title & meta\n    doc.setFontSize(14);\n    doc.text(\"TegaBus — Sales Report\", 14, 16);\n    doc.setFontSize(10);\n    doc.text(`Period: ${startDate || \"N/A\"} to ${endDate || \"N/A\"}`, 14, 24);\n    doc.text(`Total Tickets: ${totalTickets}`, 14, 30);\n    doc.text(`Total Revenue: RWF ${totalRevenue.toLocaleString()}`, 14, 36);\n\n    // Table\n    const body = tableData.sort((a, b) => a.date > b.date ? 1 : -1).map(row => [row.date, `${row.destination.fromLocation} - ${row.destination.toLocation}`, row.tickets, row.paidTickets, row.unpaidTickets, `RWF ${row.revenue.toLocaleString()}`]);\n    autoTable(doc, {\n      startY: 42,\n      head: [[\"Date\", \"Destination\", \"Tickets\", \"Paid\", \"Unpaid\", \"Revenue\"]],\n      body,\n      styles: {\n        fontSize: 9\n      },\n      headStyles: {\n        fillColor: [59, 130, 246]\n      },\n      columnStyles: {\n        0: {\n          cellWidth: 26\n        },\n        1: {\n          cellWidth: 60\n        },\n        5: {\n          halign: \"right\"\n        }\n      }\n    });\n    const fileName = `TegaBus_Report_${startDate || \"from\"}_${endDate || \"to\"}.pdf`;\n    doc.save(fileName);\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-wrap mt-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full xl:w-8/12 mb-12 xl:mb-0 px-4\",\n        children: /*#__PURE__*/_jsxDEV(CardStats, {\n          statSubtitle: \"Total Revenue\",\n          statTitle: `RWF ${totalRevenue.toLocaleString()}`,\n          statArrow: \"up\",\n          statPercent: \"12\",\n          statPercentColor: \"text-emerald-500\",\n          statDescripiron: \"Since last month\",\n          statIconName: \"fas fa-dollar-sign\",\n          statIconColor: \"bg-emerald-500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full xl:w-4/12 px-4\",\n        children: /*#__PURE__*/_jsxDEV(CardStats, {\n          statSubtitle: \"Total Tickets\",\n          statTitle: totalTickets,\n          statArrow: \"up\",\n          statPercent: \"3.48\",\n          statPercentColor: \"text-emerald-500\",\n          statDescripiron: \"Since last week\",\n          statIconName: \"fas fa-ticket-alt\",\n          statIconColor: \"bg-red-500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-wrap mt-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full px-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white rounded-lg shadow-md p-6 mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-semibold text-gray-800 mb-6\",\n            children: \"Report Configuration\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-2\",\n                children: \"Start Date\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 238,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"date\",\n                value: startDate,\n                onChange: e => setStartDate(e.target.value),\n                className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 241,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 237,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-2\",\n                children: \"End Date\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 250,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"date\",\n                value: endDate,\n                onChange: e => setEndDate(e.target.value),\n                className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 253,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 249,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex space-x-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleGenerateReport,\n              className: \"px-6 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-colors font-medium\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-chart-line mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 267,\n                columnNumber: 17\n              }, this), \"Generate Report\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 263,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleExportReport,\n              className: \"px-6 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-colors font-medium\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-download mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 274,\n                columnNumber: 17\n              }, this), \"Export Report\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 270,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-wrap mt-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full xl:w-8/12 mb-12 xl:mb-0 px-4\",\n        children: /*#__PURE__*/_jsxDEV(CardLineChart, {\n          chartData: revenueData\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full xl:w-4/12 px-4\",\n        children: /*#__PURE__*/_jsxDEV(CardBarChart, {\n          chartData: ticketSalesData\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-wrap mt-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full px-4\",\n        children: /*#__PURE__*/_jsxDEV(CardTable, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"rounded-t mb-0 px-4 py-3 border-0\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-wrap items-center justify-between\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"relative w-full px-4 max-w-full flex-grow flex-1\",\n                children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                  className: \"font-semibold text-lg text-blueGray-700\",\n                  children: \"Detailed Report Data\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 299,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 298,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 297,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 296,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"block w-full overflow-x-auto\",\n            children: /*#__PURE__*/_jsxDEV(\"table\", {\n              className: \"items-center w-full bg-transparent border-collapse\",\n              children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"px-6 py-3 text-xs uppercase font-semibold text-left bg-blueGray-50\",\n                    children: \"Date\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 309,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"px-6 py-3 text-xs uppercase font-semibold text-left bg-blueGray-50\",\n                    children: \"Destination\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 312,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"px-6 py-3 text-xs uppercase font-semibold text-left bg-blueGray-50\",\n                    children: \"Tickets Sold\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 315,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"px-6 py-3 text-xs uppercase font-semibold text-left bg-blueGray-50\",\n                    children: \"Paid\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 318,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"px-6 py-3 text-xs uppercase font-semibold text-left bg-blueGray-50\",\n                    children: \"Unpaid\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 321,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"px-6 py-3 text-xs uppercase font-semibold text-left bg-blueGray-50\",\n                    children: \"Revenue\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 324,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 308,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 307,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: tableData.sort((a, b) => a.date > b.date ? 1 : -1).map((row, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"px-6 py-4\",\n                    children: row.date\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 334,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"px-6 py-4\",\n                    children: [row.destination.fromLocation, \" - \", row.destination.toLocation]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 335,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"px-6 py-4\",\n                    children: row.tickets\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 338,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"px-6 py-4\",\n                    children: row.paidTickets\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 339,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"px-6 py-4\",\n                    children: row.unpaidTickets\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 340,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"px-6 py-4\",\n                    children: `RWF ${row.revenue.toLocaleString()}`\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 341,\n                    columnNumber: 25\n                  }, this)]\n                }, index, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 333,\n                  columnNumber: 23\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 329,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 306,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(Reports, \"dNpdNQRY3sK0OavL2WK06Zike9s=\");\n_c = Reports;\nvar _c;\n$RefreshReg$(_c, \"Reports\");","map":{"version":3,"names":["React","useState","CardStats","CardLineChart","CardBarChart","CardTable","jsPDF","autoTable","jsxDEV","_jsxDEV","Fragment","_Fragment","Reports","_s","reportType","startDate","setStartDate","endDate","setEndDate","totalRevenue","setTotalRevenue","totalTickets","setTotalTickets","revenueData","setRevenueData","labels","datasets","ticketSalesData","setTicketSalesData","tableData","setTableData","toYMD","d","dt","Date","setHours","toISOString","slice","handleGenerateReport","alert","startMillis","getTime","endMillis","token","localStorage","getItem","response","fetch","method","headers","Authorization","ok","Error","raw","json","grouped","t","_t$schedule","date","destObj","schedule","destination","from","fromLocation","to","toLocation","payState","toUpperCase","key","tickets","revenue","paidTickets","unpaidTickets","Number","totalAmount","groupedData","Object","values","reduce","sum","r","byDay","row","paid","unpaid","keys","sort","a","b","revenueSeries","map","paidSeries","unpaidSeries","label","data","borderColor","backgroundColor","tension","error","console","message","handleExportReport","length","doc","setFontSize","text","toLocaleString","body","startY","head","styles","fontSize","headStyles","fillColor","columnStyles","cellWidth","halign","fileName","save","children","className","statSubtitle","statTitle","statArrow","statPercent","statPercentColor","statDescripiron","statIconName","statIconColor","_jsxFileName","lineNumber","columnNumber","type","value","onChange","e","target","onClick","chartData","index","_c","$RefreshReg$"],"sources":["D:/AUCA/AUCA INNOVATION CENTER/WebTech/Final/TegaBus/frontend/tegaPortal/src/views/admin/Reports.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport CardStats from \"components/Cards/CardStats.js\";\nimport CardLineChart from \"components/Cards/CardLineChart.js\";\nimport CardBarChart from \"components/Cards/CardBarChart.js\";\nimport CardTable from \"components/Cards/CardTable.js\";\nimport jsPDF from \"jspdf\";\nimport autoTable from \"jspdf-autotable\";\n\nexport default function Reports() {\n  const [reportType] = useState(\"overview\");\n  const [startDate, setStartDate] = useState(\"\");\n  const [endDate, setEndDate] = useState(\"\");\n\n  const [totalRevenue, setTotalRevenue] = useState(0);\n  const [totalTickets, setTotalTickets] = useState(0);\n  const [revenueData, setRevenueData] = useState({ labels: [], datasets: [] });\n  const [ticketSalesData, setTicketSalesData] = useState({ labels: [], datasets: [] });\n  const [tableData, setTableData] = useState([]);\n\n  // Normalize a date string to YYYY-MM-DD (avoid TZ dupes)\n  const toYMD = (d) => {\n    const dt = new Date(d);\n    dt.setHours(0, 0, 0, 0);\n    return dt.toISOString().slice(0, 10);\n  };\n\n  const handleGenerateReport = async () => {\n    if (!startDate || !endDate) {\n      alert(\"Please select both start and end dates\");\n      return;\n    }\n\n    try {\n      const startMillis = new Date(startDate).getTime();\n      const endMillis = new Date(endDate).getTime();\n\n      const token = localStorage.getItem(\"token\");\n\n      const response = await fetch(\n        `http://localhost:5000/api/reports/date-range?start=${startMillis}&end=${endMillis}`,\n        {\n          method: \"GET\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${token}`,\n          },\n        }\n      );\n\n      if (!response.ok) {\n        throw new Error(\"Failed to fetch report data\");\n      }\n\n      const raw = await response.json();\n\n      // --- Group by Date (YYYY-MM-DD) + Destination (from → to) ---\n      const grouped = {};\n      for (const t of raw) {\n        const date = toYMD(t.date);\n\n        // Safely read destination object\n        const destObj =\n          t.schedule?.destination ||\n          t.destination || // fallback if your DTO differs\n          {};\n\n        const from = destObj.fromLocation || destObj.from || \"Unknown From\";\n        const to = destObj.toLocation || destObj.to || \"Unknown To\";\n        const payState = (t.payState || \"\").toUpperCase();\n\n        const key = `${date}::${from}::${to}`;\n\n        if (!grouped[key]) {\n          grouped[key] = {\n            date,\n            destination: { fromLocation: from, toLocation: to },\n            tickets: 0,\n            revenue: 0,\n            paidTickets: 0,\n            unpaidTickets: 0,\n          };\n        }\n\n        grouped[key].tickets += 1;\n        grouped[key].revenue += Number(t.totalAmount || 0);\n\n        if (payState === \"PAID\") {\n          grouped[key].paidTickets += 1;\n        } else {\n          grouped[key].unpaidTickets += 1;\n        }\n      }\n\n      const groupedData = Object.values(grouped);\n\n      // Totals\n      setTotalRevenue(groupedData.reduce((sum, r) => sum + r.revenue, 0));\n      setTotalTickets(groupedData.reduce((sum, r) => sum + r.tickets, 0));\n      setTableData(groupedData);\n\n      // --- Build charts per DAY (aggregate all destinations per day) ---\n      const byDay = {};\n      for (const row of groupedData) {\n        if (!byDay[row.date]) {\n          byDay[row.date] = { revenue: 0, paid: 0, unpaid: 0 };\n        }\n        byDay[row.date].revenue += row.revenue;\n        byDay[row.date].paid += row.paidTickets;\n        byDay[row.date].unpaid += row.unpaidTickets;\n      }\n\n      const labels = Object.keys(byDay).sort((a, b) => new Date(a) - new Date(b));\n      const revenueSeries = labels.map((d) => byDay[d].revenue);\n      const paidSeries = labels.map((d) => byDay[d].paid);\n      const unpaidSeries = labels.map((d) => byDay[d].unpaid);\n\n      setRevenueData({\n        labels,\n        datasets: [\n          {\n            label: \"Revenue (RWF)\",\n            data: revenueSeries,\n            // colors left to chart component defaults; if it requires, they are here:\n            borderColor: \"rgb(59,130,246)\",\n            backgroundColor: \"rgba(59,130,246,0.1)\",\n            tension: 0.3,\n          },\n        ],\n      });\n\n      setTicketSalesData({\n        labels,\n        datasets: [\n          {\n            label: \"Paid Tickets\",\n            data: paidSeries,\n            backgroundColor: \"rgba(34,197,94,0.8)\",\n          },\n          {\n            label: \"Unpaid Tickets\",\n            data: unpaidSeries,\n            backgroundColor: \"rgba(239,68,68,0.8)\",\n          },\n        ],\n      });\n\n      alert(\"Report generated successfully!\");\n    } catch (error) {\n      console.error(error);\n      alert(\"Error generating report: \" + error.message);\n    }\n  };\n\n  const handleExportReport = () => {\n    if (tableData.length === 0) {\n      alert(\"Generate a report first.\");\n      return;\n    }\n\n    const doc = new jsPDF();\n\n    // Title & meta\n    doc.setFontSize(14);\n    doc.text(\"TegaBus — Sales Report\", 14, 16);\n    doc.setFontSize(10);\n    doc.text(`Period: ${startDate || \"N/A\"} to ${endDate || \"N/A\"}`, 14, 24);\n    doc.text(`Total Tickets: ${totalTickets}`, 14, 30);\n    doc.text(`Total Revenue: RWF ${totalRevenue.toLocaleString()}`, 14, 36);\n\n    // Table\n    const body = tableData\n      .sort((a, b) => (a.date > b.date ? 1 : -1))\n      .map((row) => [\n        row.date,\n        `${row.destination.fromLocation} - ${row.destination.toLocation}`,\n        row.tickets,\n        row.paidTickets,\n        row.unpaidTickets,\n        `RWF ${row.revenue.toLocaleString()}`,\n      ]);\n\n    autoTable(doc, {\n      startY: 42,\n      head: [[\"Date\", \"Destination\", \"Tickets\", \"Paid\", \"Unpaid\", \"Revenue\"]],\n      body,\n      styles: { fontSize: 9 },\n      headStyles: { fillColor: [59, 130, 246] },\n      columnStyles: {\n        0: { cellWidth: 26 },\n        1: { cellWidth: 60 },\n        5: { halign: \"right\" },\n      },\n    });\n\n    const fileName = `TegaBus_Report_${startDate || \"from\"}_${endDate || \"to\"}.pdf`;\n    doc.save(fileName);\n  };\n\n  return (\n    <>\n      <div className=\"flex flex-wrap mt-4\">\n        <div className=\"w-full xl:w-8/12 mb-12 xl:mb-0 px-4\">\n          <CardStats\n            statSubtitle=\"Total Revenue\"\n            statTitle={`RWF ${totalRevenue.toLocaleString()}`}\n            statArrow=\"up\"\n            statPercent=\"12\"\n            statPercentColor=\"text-emerald-500\"\n            statDescripiron=\"Since last month\"\n            statIconName=\"fas fa-dollar-sign\"\n            statIconColor=\"bg-emerald-500\"\n          />\n        </div>\n        <div className=\"w-full xl:w-4/12 px-4\">\n          <CardStats\n            statSubtitle=\"Total Tickets\"\n            statTitle={totalTickets}\n            statArrow=\"up\"\n            statPercent=\"3.48\"\n            statPercentColor=\"text-emerald-500\"\n            statDescripiron=\"Since last week\"\n            statIconName=\"fas fa-ticket-alt\"\n            statIconColor=\"bg-red-500\"\n          />\n        </div>\n      </div>\n\n      {/* Date Range Selection */}\n      <div className=\"flex flex-wrap mt-4\">\n        <div className=\"w-full px-4\">\n          <div className=\"bg-white rounded-lg shadow-md p-6 mb-6\">\n            <h3 className=\"text-lg font-semibold text-gray-800 mb-6\">\n              Report Configuration\n            </h3>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Start Date\n                </label>\n                <input\n                  type=\"date\"\n                  value={startDate}\n                  onChange={(e) => setStartDate(e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  End Date\n                </label>\n                <input\n                  type=\"date\"\n                  value={endDate}\n                  onChange={(e) => setEndDate(e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                />\n              </div>\n            </div>\n\n            <div className=\"flex space-x-4\">\n              <button\n                onClick={handleGenerateReport}\n                className=\"px-6 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-colors font-medium\"\n              >\n                <i className=\"fas fa-chart-line mr-2\"></i>\n                Generate Report\n              </button>\n              <button\n                onClick={handleExportReport}\n                className=\"px-6 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-colors font-medium\"\n              >\n                <i className=\"fas fa-download mr-2\"></i>\n                Export Report\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Charts */}\n      <div className=\"flex flex-wrap mt-4\">\n        <div className=\"w-full xl:w-8/12 mb-12 xl:mb-0 px-4\">\n          <CardLineChart chartData={revenueData} />\n        </div>\n        <div className=\"w-full xl:w-4/12 px-4\">\n          <CardBarChart chartData={ticketSalesData} />\n        </div>\n      </div>\n\n      {/* Table */}\n      <div className=\"flex flex-wrap mt-4\">\n        <div className=\"w-full px-4\">\n          <CardTable>\n            <div className=\"rounded-t mb-0 px-4 py-3 border-0\">\n              <div className=\"flex flex-wrap items-center justify-between\">\n                <div className=\"relative w-full px-4 max-w-full flex-grow flex-1\">\n                  <h3 className=\"font-semibold text-lg text-blueGray-700\">\n                    Detailed Report Data\n                  </h3>\n                </div>\n              </div>\n            </div>\n            <div className=\"block w-full overflow-x-auto\">\n              <table className=\"items-center w-full bg-transparent border-collapse\">\n                <thead>\n                  <tr>\n                    <th className=\"px-6 py-3 text-xs uppercase font-semibold text-left bg-blueGray-50\">\n                      Date\n                    </th>\n                    <th className=\"px-6 py-3 text-xs uppercase font-semibold text-left bg-blueGray-50\">\n                      Destination\n                    </th>\n                    <th className=\"px-6 py-3 text-xs uppercase font-semibold text-left bg-blueGray-50\">\n                      Tickets Sold\n                    </th>\n                    <th className=\"px-6 py-3 text-xs uppercase font-semibold text-left bg-blueGray-50\">\n                      Paid\n                    </th>\n                    <th className=\"px-6 py-3 text-xs uppercase font-semibold text-left bg-blueGray-50\">\n                      Unpaid\n                    </th>\n                    <th className=\"px-6 py-3 text-xs uppercase font-semibold text-left bg-blueGray-50\">\n                      Revenue\n                    </th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {tableData\n                    .sort((a, b) => (a.date > b.date ? 1 : -1))\n                    .map((row, index) => (\n                      <tr key={index}>\n                        <td className=\"px-6 py-4\">{row.date}</td>\n                        <td className=\"px-6 py-4\">\n                          {row.destination.fromLocation} - {row.destination.toLocation}\n                        </td>\n                        <td className=\"px-6 py-4\">{row.tickets}</td>\n                        <td className=\"px-6 py-4\">{row.paidTickets}</td>\n                        <td className=\"px-6 py-4\">{row.unpaidTickets}</td>\n                        <td className=\"px-6 py-4\">{`RWF ${row.revenue.toLocaleString()}`}</td>\n                      </tr>\n                    ))}\n                </tbody>\n              </table>\n            </div>\n          </CardTable>\n        </div>\n      </div>\n    </>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}