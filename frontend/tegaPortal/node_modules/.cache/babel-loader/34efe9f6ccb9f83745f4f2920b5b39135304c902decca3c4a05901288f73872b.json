{"ast":null,"code":"var _jsxFileName = \"D:\\\\AUCA\\\\AUCA INNOVATION CENTER\\\\WebTech\\\\Final\\\\TegaBus\\\\frontend\\\\tegaPortal\\\\src\\\\views\\\\admin\\\\TicketAdd.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport jsPDF from 'jspdf';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function TicketAdd() {\n  _s();\n  var _selectedScheduleInfo5, _selectedScheduleInfo6, _selectedScheduleInfo7;\n  const history = useHistory();\n  const [ticketData, setTicketData] = useState({\n    names: \"\",\n    phone: \"\",\n    express: \"\",\n    schedule: \"\",\n    seatNo: \"\",\n    totalAmount: 0,\n    payState: \"PENDING\",\n    date: new Date().toISOString().split('T')[0]\n  });\n  const [expressList, setExpressList] = useState([]);\n  const [scheduleList, setScheduleList] = useState([]);\n  const [busList, setBusList] = useState([]);\n  const [role, setRole] = useState(\"\");\n  const [existingTickets, setExistingTickets] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [availableSeats, setAvailableSeats] = useState([]);\n  const [selectedScheduleInfo, setSelectedScheduleInfo] = useState(null);\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const token = localStorage.getItem(\"token\");\n        const expressId = localStorage.getItem(\"expressId\");\n\n        // Get user role\n        let userRole = \"\";\n        const userObj = localStorage.getItem(\"user\");\n        if (userObj) {\n          const user = JSON.parse(userObj);\n          userRole = user.role ? user.role.toUpperCase() : \"\";\n        } else {\n          userRole = localStorage.getItem(\"role\") ? localStorage.getItem(\"role\").toUpperCase() : \"\";\n        }\n        setRole(userRole);\n\n        // Fetch express list (only for super admin)\n        if (userRole === \"SUPER_ADMIN\") {\n          const expressResponse = await fetch(\"http://localhost:5000/api/express/all\", {\n            method: \"GET\",\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          });\n          if (expressResponse.ok) {\n            setExpressList(await expressResponse.json());\n          }\n        } else {\n          // For regular users, set their express automatically\n          setTicketData(prev => ({\n            ...prev,\n            express: expressId\n          }));\n        }\n\n        // Fetch schedules\n        const scheduleResponse = await fetch(\"http://localhost:5000/api/tickets/schedule\", {\n          method: \"GET\",\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        if (scheduleResponse.ok) {\n          setScheduleList(await scheduleResponse.json());\n        }\n\n        // Fetch buses\n        const busResponse = await fetch(\"http://localhost:5000/api/tickets/bus\", {\n          method: \"GET\",\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        if (busResponse.ok) {\n          setBusList(await busResponse.json());\n        }\n\n        // Fetch existing tickets\n        const ticketsResponse = await fetch(\"http://localhost:5000/api/tickets/all\", {\n          method: \"GET\",\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        if (ticketsResponse.ok) {\n          setExistingTickets(await ticketsResponse.json());\n        }\n        setLoading(false);\n      } catch (error) {\n        console.error(\"Error fetching data:\", error);\n        setLoading(false);\n        alert(\"Error loading data: \" + error.message);\n      }\n    };\n    fetchData();\n  }, []);\n\n  // Calculate available seats when schedule changes\n  useEffect(() => {\n    if (!ticketData.schedule) {\n      setAvailableSeats([]);\n      setSelectedScheduleInfo(null);\n      return;\n    }\n    const selectedSchedule = scheduleList.find(s => s.id === ticketData.schedule);\n    if (!selectedSchedule || !selectedSchedule.bus) {\n      setAvailableSeats([]);\n      setSelectedScheduleInfo(null);\n      return;\n    }\n    setSelectedScheduleInfo(selectedSchedule);\n\n    // Get booked seats for this specific schedule\n    const bookedSeats = existingTickets.filter(ticket => {\n      var _ticket$schedule;\n      return ((_ticket$schedule = ticket.schedule) === null || _ticket$schedule === void 0 ? void 0 : _ticket$schedule.id) === ticketData.schedule;\n    }).map(ticket => ticket.seatNo);\n\n    // Calculate available seats\n    const totalSeats = selectedSchedule.bus.capacity || selectedSchedule.bus.busSeat || 50;\n    const available = [];\n    for (let i = 1; i <= totalSeats; i++) {\n      if (!bookedSeats.includes(i)) {\n        available.push(i);\n      }\n    }\n    setAvailableSeats(available);\n\n    // Auto-select first available seat\n    if (available.length > 0) {\n      setTicketData(prev => ({\n        ...prev,\n        seatNo: available[0],\n        totalAmount: selectedSchedule.price || 0\n      }));\n    } else {\n      setTicketData(prev => ({\n        ...prev,\n        seatNo: \"\",\n        totalAmount: selectedSchedule.price || 0\n      }));\n    }\n  }, [ticketData.schedule, scheduleList, existingTickets]);\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setTicketData({\n      ...ticketData,\n      [name]: value\n    });\n  };\n\n  // Generate PDF ticket\n  const generateTicketPDF = ticketResponse => {\n    const doc = new jsPDF();\n    const pageWidth = doc.internal.pageSize.width;\n\n    // Get express info\n    const expressInfo = role === \"SUPER_ADMIN\" ? expressList.find(exp => exp.id === ticketData.express) : {\n      expressName: \"Bus Express\",\n      id: ticketData.express\n    };\n\n    // Header\n    doc.setFontSize(20);\n    doc.setFont(undefined, 'bold');\n    doc.text((expressInfo === null || expressInfo === void 0 ? void 0 : expressInfo.expressName) || \"Bus Express\", pageWidth / 2, 30, {\n      align: 'center'\n    });\n    doc.setFontSize(16);\n    doc.text(\"BUS TICKET\", pageWidth / 2, 45, {\n      align: 'center'\n    });\n\n    // Ticket details\n    doc.setFontSize(12);\n    doc.setFont(undefined, 'normal');\n    const yStart = 70;\n    const lineHeight = 15;\n    let currentY = yStart;\n\n    // Ticket information\n    doc.setFont(undefined, 'bold');\n    doc.text(\"TICKET INFORMATION\", 20, currentY);\n    currentY += lineHeight;\n    doc.setFont(undefined, 'normal');\n    doc.text(`Ticket Number: ${ticketResponse.tickeNumber || ticketResponse.ticketNumber || 'N/A'}`, 20, currentY);\n    currentY += lineHeight;\n    doc.text(`Passenger Name: ${ticketData.names}`, 20, currentY);\n    currentY += lineHeight;\n    doc.text(`Phone Number: ${ticketData.phone}`, 20, currentY);\n    currentY += lineHeight;\n    if (ticketData.email) {\n      doc.text(`Email: ${ticketData.email}`, 20, currentY);\n      currentY += lineHeight;\n    }\n\n    // Schedule information\n    currentY += 10;\n    doc.setFont(undefined, 'bold');\n    doc.text(\"JOURNEY DETAILS\", 20, currentY);\n    currentY += lineHeight;\n    doc.setFont(undefined, 'normal');\n    if (selectedScheduleInfo) {\n      var _selectedScheduleInfo, _selectedScheduleInfo2, _selectedScheduleInfo3;\n      doc.text(`From: ${((_selectedScheduleInfo = selectedScheduleInfo.destination) === null || _selectedScheduleInfo === void 0 ? void 0 : _selectedScheduleInfo.fromLocation) || 'N/A'}`, 20, currentY);\n      currentY += lineHeight;\n      doc.text(`To: ${((_selectedScheduleInfo2 = selectedScheduleInfo.destination) === null || _selectedScheduleInfo2 === void 0 ? void 0 : _selectedScheduleInfo2.toLocation) || 'N/A'}`, 20, currentY);\n      currentY += lineHeight;\n      doc.text(`Date: ${selectedScheduleInfo.date || ticketData.date}`, 20, currentY);\n      currentY += lineHeight;\n      doc.text(`Time: ${selectedScheduleInfo.time || 'N/A'}`, 20, currentY);\n      currentY += lineHeight;\n      doc.text(`Bus Plate No: ${((_selectedScheduleInfo3 = selectedScheduleInfo.bus) === null || _selectedScheduleInfo3 === void 0 ? void 0 : _selectedScheduleInfo3.plateNumber) || 'N/A'}`, 20, currentY);\n      currentY += lineHeight;\n    }\n    doc.text(`Seat Number: ${ticketData.seatNo}`, 20, currentY);\n    currentY += lineHeight;\n    doc.text(`Amount: ${ticketData.totalAmount || 0} RWF`, 20, currentY);\n    currentY += lineHeight;\n    doc.text(`Payment Status: ${ticketData.payState}`, 20, currentY);\n    currentY += 20;\n\n    // Footer\n    doc.setFontSize(10);\n    doc.text(\"Thank you for choosing our service!\", pageWidth / 2, currentY + 20, {\n      align: 'center'\n    });\n    doc.text(\"Present this ticket when boarding the bus.\", pageWidth / 2, currentY + 30, {\n      align: 'center'\n    });\n\n    // Save the PDF\n    doc.save(`ticket-${ticketResponse.tickeNumber || 'new'}.pdf`);\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (availableSeats.length === 0) {\n      return alert(\"No seats available for the selected schedule.\");\n    }\n    if (!ticketData.seatNo) {\n      return alert(\"Please select a seat number.\");\n    }\n    try {\n      var _selectedScheduleInfo4;\n      const token = localStorage.getItem(\"token\");\n\n      // Prepare payload\n      const payload = {\n        names: ticketData.names,\n        phone: ticketData.phone,\n        express: role === \"SUPER_ADMIN\" ? {\n          id: ticketData.express\n        } : {\n          id: ticketData.express\n        },\n        schedule: {\n          id: ticketData.schedule\n        },\n        busPlateNo: (selectedScheduleInfo === null || selectedScheduleInfo === void 0 ? void 0 : (_selectedScheduleInfo4 = selectedScheduleInfo.bus) === null || _selectedScheduleInfo4 === void 0 ? void 0 : _selectedScheduleInfo4.plateNumber) || \"N/A\",\n        seatNo: parseInt(ticketData.seatNo),\n        totalAmount: parseFloat(ticketData.totalAmount) || 0,\n        payState: ticketData.payState,\n        date: new Date(ticketData.date).toISOString()\n      };\n      console.log(\"Submitting payload:\", payload);\n      const response = await fetch(\"http://localhost:5000/api/tickets/register\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`\n        },\n        body: JSON.stringify(payload)\n      });\n      if (!response.ok) {\n        const errorText = await response.text();\n        throw new Error(errorText || \"Failed to save ticket\");\n      }\n      const ticketResponse = await response.json();\n\n      // Generate and download PDF\n      generateTicketPDF(ticketResponse);\n      alert(\"Ticket added successfully! PDF has been generated.\");\n      history.push(\"/admin/tickets\");\n    } catch (error) {\n      console.error(\"Error saving ticket:\", error);\n      alert(\"Error saving ticket: \" + error.message);\n    }\n  };\n  const handleCancel = () => history.push(\"/admin/tickets\");\n  if (loading) return /*#__PURE__*/_jsxDEV(\"p\", {\n    className: \"text-center p-6\",\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 300,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-wrap\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full xl:w-8/12 mb-12 xl:mb-0 px-4 mx-auto\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative flex flex-col min-w-0 break-words w-full mb-6 shadow-lg rounded-lg bg-white border-0\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"rounded-t bg-white mb-0 px-6 py-6 flex justify-between items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n            className: \"text-blueGray-700 text-xl font-bold\",\n            children: \"Add New Ticket\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 307,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleCancel,\n            className: \"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\",\n            children: \"Back\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit,\n          className: \"flex-auto px-4 lg:px-10 py-10 pt-0\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-2 gap-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-2\",\n                children: \"Passenger Name *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 321,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                name: \"names\",\n                value: ticketData.names,\n                onChange: handleInputChange,\n                required: true,\n                className: \"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 324,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 320,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-2\",\n                children: \"Phone Number *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 336,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"tel\",\n                name: \"phone\",\n                value: ticketData.phone,\n                onChange: handleInputChange,\n                required: true,\n                className: \"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 339,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 335,\n              columnNumber: 15\n            }, this), role === \"SUPER_ADMIN\" && /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-2\",\n                children: \"Express Company *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 352,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                name: \"express\",\n                value: ticketData.express,\n                onChange: handleInputChange,\n                required: true,\n                className: \"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: \"Select Express\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 362,\n                  columnNumber: 21\n                }, this), expressList.map(exp => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: exp.id,\n                  children: exp.expressName\n                }, exp.id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 364,\n                  columnNumber: 23\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 355,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 351,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-2\",\n                children: \"Schedule *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 374,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                name: \"schedule\",\n                value: ticketData.schedule,\n                onChange: handleInputChange,\n                required: true,\n                className: \"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: \"Select Schedule\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 384,\n                  columnNumber: 19\n                }, this), scheduleList.map(sch => {\n                  var _sch$destination, _sch$destination2, _sch$bus;\n                  return /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: sch.id,\n                    children: [(_sch$destination = sch.destination) === null || _sch$destination === void 0 ? void 0 : _sch$destination.fromLocation, \" - \", (_sch$destination2 = sch.destination) === null || _sch$destination2 === void 0 ? void 0 : _sch$destination2.toLocation, \"(\", sch.date, \" \", sch.time, \") - \", (_sch$bus = sch.bus) === null || _sch$bus === void 0 ? void 0 : _sch$bus.plateNumber]\n                  }, sch.id, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 386,\n                    columnNumber: 21\n                  }, this);\n                })]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 377,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 373,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-2\",\n                children: [\"Seat Number * (Available: \", availableSeats.length, \")\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 396,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                name: \"seatNo\",\n                value: ticketData.seatNo,\n                onChange: handleInputChange,\n                required: true,\n                disabled: availableSeats.length === 0,\n                className: \"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100\",\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: \"Select Seat\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 407,\n                  columnNumber: 19\n                }, this), availableSeats.map(seat => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: seat,\n                  children: [\"Seat \", seat]\n                }, seat, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 409,\n                  columnNumber: 21\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 399,\n                columnNumber: 17\n              }, this), availableSeats.length === 0 && ticketData.schedule && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-red-500 text-sm mt-1\",\n                children: \"No seats available for this schedule\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 415,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 395,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-2\",\n                children: \"Total Amount (RWF) *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 421,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                name: \"totalAmount\",\n                value: ticketData.totalAmount,\n                onChange: handleInputChange,\n                required: true,\n                min: \"0\",\n                step: \"0.01\",\n                className: \"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 424,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 420,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-2\",\n                children: \"Payment Status *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 438,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                name: \"payState\",\n                value: ticketData.payState,\n                onChange: handleInputChange,\n                required: true,\n                className: \"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"PENDING\",\n                  children: \"Pending\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 448,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"PAID\",\n                  children: \"Paid\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 449,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"CANCELLED\",\n                  children: \"Cancelled\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 450,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 441,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 437,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-2\",\n                children: \"Booking Date *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 456,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"date\",\n                name: \"date\",\n                value: ticketData.date,\n                onChange: handleInputChange,\n                required: true,\n                className: \"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 459,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 455,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 13\n          }, this), selectedScheduleInfo && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-6 p-4 bg-gray-50 rounded-lg\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"font-medium text-gray-700 mb-2\",\n              children: \"Selected Schedule Details:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 473,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-2 gap-4 text-sm text-gray-600\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [\"Bus: \", (_selectedScheduleInfo5 = selectedScheduleInfo.bus) === null || _selectedScheduleInfo5 === void 0 ? void 0 : _selectedScheduleInfo5.plateNumber]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 475,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [\"Capacity: \", ((_selectedScheduleInfo6 = selectedScheduleInfo.bus) === null || _selectedScheduleInfo6 === void 0 ? void 0 : _selectedScheduleInfo6.capacity) || ((_selectedScheduleInfo7 = selectedScheduleInfo.bus) === null || _selectedScheduleInfo7 === void 0 ? void 0 : _selectedScheduleInfo7.busSeat)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 476,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [\"Available Seats: \", availableSeats.length]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 477,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [\"Price: \", selectedScheduleInfo.price || 0, \" RWF\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 478,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 474,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 472,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-end space-x-4 pt-6 border-t border-gray-200 mt-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: handleCancel,\n              className: \"px-6 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors\",\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 485,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              className: \"px-6 py-3 bg-black text-white rounded-lg hover:bg-gray-700 transition-colors disabled:bg-gray-400\",\n              disabled: availableSeats.length === 0 || !ticketData.schedule,\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-save mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 497,\n                columnNumber: 17\n              }, this), \"Save Ticket & Generate PDF\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 492,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 484,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 303,\n    columnNumber: 5\n  }, this);\n}\n_s(TicketAdd, \"x7ohs+wVrg7tWidQZrFcAHH2dN0=\", false, function () {\n  return [useHistory];\n});\n_c = TicketAdd;\nvar _c;\n$RefreshReg$(_c, \"TicketAdd\");","map":{"version":3,"names":["React","useState","useEffect","useHistory","jsPDF","jsxDEV","_jsxDEV","TicketAdd","_s","_selectedScheduleInfo5","_selectedScheduleInfo6","_selectedScheduleInfo7","history","ticketData","setTicketData","names","phone","express","schedule","seatNo","totalAmount","payState","date","Date","toISOString","split","expressList","setExpressList","scheduleList","setScheduleList","busList","setBusList","role","setRole","existingTickets","setExistingTickets","loading","setLoading","availableSeats","setAvailableSeats","selectedScheduleInfo","setSelectedScheduleInfo","fetchData","token","localStorage","getItem","expressId","userRole","userObj","user","JSON","parse","toUpperCase","expressResponse","fetch","method","headers","Authorization","ok","json","prev","scheduleResponse","busResponse","ticketsResponse","error","console","alert","message","selectedSchedule","find","s","id","bus","bookedSeats","filter","ticket","_ticket$schedule","map","totalSeats","capacity","busSeat","available","i","includes","push","length","price","handleInputChange","e","name","value","target","generateTicketPDF","ticketResponse","doc","pageWidth","internal","pageSize","width","expressInfo","exp","expressName","setFontSize","setFont","undefined","text","align","yStart","lineHeight","currentY","tickeNumber","ticketNumber","email","_selectedScheduleInfo","_selectedScheduleInfo2","_selectedScheduleInfo3","destination","fromLocation","toLocation","time","plateNumber","save","handleSubmit","preventDefault","_selectedScheduleInfo4","payload","busPlateNo","parseInt","parseFloat","log","response","body","stringify","errorText","Error","handleCancel","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","onSubmit","type","onChange","required","sch","_sch$destination","_sch$destination2","_sch$bus","disabled","seat","min","step","_c","$RefreshReg$"],"sources":["D:/AUCA/AUCA INNOVATION CENTER/WebTech/Final/TegaBus/frontend/tegaPortal/src/views/admin/TicketAdd.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport jsPDF from 'jspdf';\r\n\r\nexport default function TicketAdd() {\r\n  const history = useHistory();\r\n\r\n  const [ticketData, setTicketData] = useState({\r\n    names: \"\",\r\n    phone: \"\",\r\n    express: \"\",\r\n    schedule: \"\",\r\n    seatNo: \"\",\r\n    totalAmount: 0,\r\n    payState: \"PENDING\",\r\n    date: new Date().toISOString().split('T')[0],\r\n  });\r\n\r\n  const [expressList, setExpressList] = useState([]);\r\n  const [scheduleList, setScheduleList] = useState([]);\r\n  const [busList, setBusList] = useState([]);\r\n  const [role, setRole] = useState(\"\");\r\n  const [existingTickets, setExistingTickets] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [availableSeats, setAvailableSeats] = useState([]);\r\n  const [selectedScheduleInfo, setSelectedScheduleInfo] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const token = localStorage.getItem(\"token\");\r\n        const expressId = localStorage.getItem(\"expressId\");\r\n\r\n        // Get user role\r\n        let userRole = \"\";\r\n        const userObj = localStorage.getItem(\"user\");\r\n        if (userObj) {\r\n          const user = JSON.parse(userObj);\r\n          userRole = user.role ? user.role.toUpperCase() : \"\";\r\n        } else {\r\n          userRole = localStorage.getItem(\"role\") ? localStorage.getItem(\"role\").toUpperCase() : \"\";\r\n        }\r\n        setRole(userRole);\r\n\r\n        // Fetch express list (only for super admin)\r\n        if (userRole === \"SUPER_ADMIN\") {\r\n          const expressResponse = await fetch(\"http://localhost:5000/api/express/all\", {\r\n            method: \"GET\",\r\n            headers: { Authorization: `Bearer ${token}` },\r\n          });\r\n          if (expressResponse.ok) {\r\n            setExpressList(await expressResponse.json());\r\n          }\r\n        } else {\r\n          // For regular users, set their express automatically\r\n          setTicketData((prev) => ({ ...prev, express: expressId }));\r\n        }\r\n\r\n        // Fetch schedules\r\n        const scheduleResponse = await fetch(\"http://localhost:5000/api/tickets/schedule\", {\r\n          method: \"GET\",\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        });\r\n        if (scheduleResponse.ok) {\r\n          setScheduleList(await scheduleResponse.json());\r\n        }\r\n\r\n        // Fetch buses\r\n        const busResponse = await fetch(\"http://localhost:5000/api/tickets/bus\", {\r\n          method: \"GET\",\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        });\r\n        if (busResponse.ok) {\r\n          setBusList(await busResponse.json());\r\n        }\r\n\r\n        // Fetch existing tickets\r\n        const ticketsResponse = await fetch(\"http://localhost:5000/api/tickets/all\", {\r\n          method: \"GET\",\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        });\r\n        if (ticketsResponse.ok) {\r\n          setExistingTickets(await ticketsResponse.json());\r\n        }\r\n\r\n        setLoading(false);\r\n      } catch (error) {\r\n        console.error(\"Error fetching data:\", error);\r\n        setLoading(false);\r\n        alert(\"Error loading data: \" + error.message);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, []);\r\n\r\n  // Calculate available seats when schedule changes\r\n  useEffect(() => {\r\n    if (!ticketData.schedule) {\r\n      setAvailableSeats([]);\r\n      setSelectedScheduleInfo(null);\r\n      return;\r\n    }\r\n\r\n    const selectedSchedule = scheduleList.find((s) => s.id === ticketData.schedule);\r\n    if (!selectedSchedule || !selectedSchedule.bus) {\r\n      setAvailableSeats([]);\r\n      setSelectedScheduleInfo(null);\r\n      return;\r\n    }\r\n\r\n    setSelectedScheduleInfo(selectedSchedule);\r\n\r\n    // Get booked seats for this specific schedule\r\n    const bookedSeats = existingTickets\r\n      .filter((ticket) => ticket.schedule?.id === ticketData.schedule)\r\n      .map((ticket) => ticket.seatNo);\r\n\r\n    // Calculate available seats\r\n    const totalSeats = selectedSchedule.bus.capacity || selectedSchedule.bus.busSeat || 50;\r\n    const available = [];\r\n    for (let i = 1; i <= totalSeats; i++) {\r\n      if (!bookedSeats.includes(i)) {\r\n        available.push(i);\r\n      }\r\n    }\r\n\r\n    setAvailableSeats(available);\r\n\r\n    // Auto-select first available seat\r\n    if (available.length > 0) {\r\n      setTicketData((prev) => ({\r\n        ...prev,\r\n        seatNo: available[0],\r\n        totalAmount: selectedSchedule.price || 0,\r\n      }));\r\n    } else {\r\n      setTicketData((prev) => ({\r\n        ...prev,\r\n        seatNo: \"\",\r\n        totalAmount: selectedSchedule.price || 0,\r\n      }));\r\n    }\r\n  }, [ticketData.schedule, scheduleList, existingTickets]);\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setTicketData({ ...ticketData, [name]: value });\r\n  };\r\n\r\n  // Generate PDF ticket\r\n  const generateTicketPDF = (ticketResponse) => {\r\n    const doc = new jsPDF();\r\n    const pageWidth = doc.internal.pageSize.width;\r\n    \r\n    // Get express info\r\n    const expressInfo = role === \"SUPER_ADMIN\" \r\n      ? expressList.find((exp) => exp.id === ticketData.express)\r\n      : { expressName: \"Bus Express\", id: ticketData.express };\r\n\r\n    // Header\r\n    doc.setFontSize(20);\r\n    doc.setFont(undefined, 'bold');\r\n    doc.text(expressInfo?.expressName || \"Bus Express\", pageWidth / 2, 30, { align: 'center' });\r\n    \r\n    doc.setFontSize(16);\r\n    doc.text(\"BUS TICKET\", pageWidth / 2, 45, { align: 'center' });\r\n    \r\n    // Ticket details\r\n    doc.setFontSize(12);\r\n    doc.setFont(undefined, 'normal');\r\n    \r\n    const yStart = 70;\r\n    const lineHeight = 15;\r\n    let currentY = yStart;\r\n    \r\n    // Ticket information\r\n    doc.setFont(undefined, 'bold');\r\n    doc.text(\"TICKET INFORMATION\", 20, currentY);\r\n    currentY += lineHeight;\r\n    \r\n    doc.setFont(undefined, 'normal');\r\n    doc.text(`Ticket Number: ${ticketResponse.tickeNumber || ticketResponse.ticketNumber || 'N/A'}`, 20, currentY);\r\n    currentY += lineHeight;\r\n    \r\n    doc.text(`Passenger Name: ${ticketData.names}`, 20, currentY);\r\n    currentY += lineHeight;\r\n    \r\n    doc.text(`Phone Number: ${ticketData.phone}`, 20, currentY);\r\n    currentY += lineHeight;\r\n    \r\n    if (ticketData.email) {\r\n      doc.text(`Email: ${ticketData.email}`, 20, currentY);\r\n      currentY += lineHeight;\r\n    }\r\n    \r\n    // Schedule information\r\n    currentY += 10;\r\n    doc.setFont(undefined, 'bold');\r\n    doc.text(\"JOURNEY DETAILS\", 20, currentY);\r\n    currentY += lineHeight;\r\n    \r\n    doc.setFont(undefined, 'normal');\r\n    if (selectedScheduleInfo) {\r\n      doc.text(`From: ${selectedScheduleInfo.destination?.fromLocation || 'N/A'}`, 20, currentY);\r\n      currentY += lineHeight;\r\n      \r\n      doc.text(`To: ${selectedScheduleInfo.destination?.toLocation || 'N/A'}`, 20, currentY);\r\n      currentY += lineHeight;\r\n      \r\n      doc.text(`Date: ${selectedScheduleInfo.date || ticketData.date}`, 20, currentY);\r\n      currentY += lineHeight;\r\n      \r\n      doc.text(`Time: ${selectedScheduleInfo.time || 'N/A'}`, 20, currentY);\r\n      currentY += lineHeight;\r\n      \r\n      doc.text(`Bus Plate No: ${selectedScheduleInfo.bus?.plateNumber || 'N/A'}`, 20, currentY);\r\n      currentY += lineHeight;\r\n    }\r\n    \r\n    doc.text(`Seat Number: ${ticketData.seatNo}`, 20, currentY);\r\n    currentY += lineHeight;\r\n    \r\n    doc.text(`Amount: ${ticketData.totalAmount || 0} RWF`, 20, currentY);\r\n    currentY += lineHeight;\r\n    \r\n    doc.text(`Payment Status: ${ticketData.payState}`, 20, currentY);\r\n    currentY += 20;\r\n    \r\n    // Footer\r\n    doc.setFontSize(10);\r\n    doc.text(\"Thank you for choosing our service!\", pageWidth / 2, currentY + 20, { align: 'center' });\r\n    doc.text(\"Present this ticket when boarding the bus.\", pageWidth / 2, currentY + 30, { align: 'center' });\r\n    \r\n    // Save the PDF\r\n    doc.save(`ticket-${ticketResponse.tickeNumber || 'new'}.pdf`);\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (availableSeats.length === 0) {\r\n      return alert(\"No seats available for the selected schedule.\");\r\n    }\r\n\r\n    if (!ticketData.seatNo) {\r\n      return alert(\"Please select a seat number.\");\r\n    }\r\n\r\n    try {\r\n      const token = localStorage.getItem(\"token\");\r\n\r\n      // Prepare payload\r\n      const payload = {\r\n        names: ticketData.names,\r\n        phone: ticketData.phone,\r\n        express: role === \"SUPER_ADMIN\"\r\n          ? { id: ticketData.express }\r\n          : { id: ticketData.express },\r\n        schedule: { id: ticketData.schedule },\r\n        busPlateNo: selectedScheduleInfo?.bus?.plateNumber || \"N/A\",\r\n        seatNo: parseInt(ticketData.seatNo),\r\n        totalAmount: parseFloat(ticketData.totalAmount) || 0,\r\n        payState: ticketData.payState,\r\n        date: new Date(ticketData.date).toISOString(),\r\n      };\r\n\r\n      console.log(\"Submitting payload:\", payload);\r\n\r\n      const response = await fetch(\"http://localhost:5000/api/tickets/register\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n        body: JSON.stringify(payload),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorText = await response.text();\r\n        throw new Error(errorText || \"Failed to save ticket\");\r\n      }\r\n\r\n      const ticketResponse = await response.json();\r\n      \r\n      // Generate and download PDF\r\n      generateTicketPDF(ticketResponse);\r\n      \r\n      alert(\"Ticket added successfully! PDF has been generated.\");\r\n      history.push(\"/admin/tickets\");\r\n      \r\n    } catch (error) {\r\n      console.error(\"Error saving ticket:\", error);\r\n      alert(\"Error saving ticket: \" + error.message);\r\n    }\r\n  };\r\n\r\n  const handleCancel = () => history.push(\"/admin/tickets\");\r\n\r\n  if (loading) return <p className=\"text-center p-6\">Loading...</p>;\r\n\r\n  return (\r\n    <div className=\"flex flex-wrap\">\r\n      <div className=\"w-full xl:w-8/12 mb-12 xl:mb-0 px-4 mx-auto\">\r\n        <div className=\"relative flex flex-col min-w-0 break-words w-full mb-6 shadow-lg rounded-lg bg-white border-0\">\r\n          <div className=\"rounded-t bg-white mb-0 px-6 py-6 flex justify-between items-center\">\r\n            <h6 className=\"text-blueGray-700 text-xl font-bold\">Add New Ticket</h6>\r\n            <button\r\n              onClick={handleCancel}\r\n              className=\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\"\r\n            >\r\n              Back\r\n            </button>\r\n          </div>\r\n\r\n          <form onSubmit={handleSubmit} className=\"flex-auto px-4 lg:px-10 py-10 pt-0\">\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n              \r\n              {/* Passenger Name */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Passenger Name *\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"names\"\r\n                  value={ticketData.names}\r\n                  onChange={handleInputChange}\r\n                  required\r\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                />\r\n              </div>\r\n\r\n              {/* Phone */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Phone Number *\r\n                </label>\r\n                <input\r\n                  type=\"tel\"\r\n                  name=\"phone\"\r\n                  value={ticketData.phone}\r\n                  onChange={handleInputChange}\r\n                  required\r\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                />\r\n              </div>\r\n\r\n              {/* Express (only for Super Admin) */}\r\n              {role === \"SUPER_ADMIN\" && (\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    Express Company *\r\n                  </label>\r\n                  <select\r\n                    name=\"express\"\r\n                    value={ticketData.express}\r\n                    onChange={handleInputChange}\r\n                    required\r\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                  >\r\n                    <option value=\"\">Select Express</option>\r\n                    {expressList.map((exp) => (\r\n                      <option key={exp.id} value={exp.id}>\r\n                        {exp.expressName}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n              )}\r\n\r\n              {/* Schedule */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Schedule *\r\n                </label>\r\n                <select\r\n                  name=\"schedule\"\r\n                  value={ticketData.schedule}\r\n                  onChange={handleInputChange}\r\n                  required\r\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                >\r\n                  <option value=\"\">Select Schedule</option>\r\n                  {scheduleList.map((sch) => (\r\n                    <option key={sch.id} value={sch.id}>\r\n                      {sch.destination?.fromLocation} - {sch.destination?.toLocation} \r\n                      ({sch.date} {sch.time}) - {sch.bus?.plateNumber}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n\r\n              {/* Seat Number */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Seat Number * (Available: {availableSeats.length})\r\n                </label>\r\n                <select\r\n                  name=\"seatNo\"\r\n                  value={ticketData.seatNo}\r\n                  onChange={handleInputChange}\r\n                  required\r\n                  disabled={availableSeats.length === 0}\r\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100\"\r\n                >\r\n                  <option value=\"\">Select Seat</option>\r\n                  {availableSeats.map((seat) => (\r\n                    <option key={seat} value={seat}>\r\n                      Seat {seat}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n                {availableSeats.length === 0 && ticketData.schedule && (\r\n                  <p className=\"text-red-500 text-sm mt-1\">No seats available for this schedule</p>\r\n                )}\r\n              </div>\r\n\r\n              {/* Total Amount */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Total Amount (RWF) *\r\n                </label>\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"totalAmount\"\r\n                  value={ticketData.totalAmount}\r\n                  onChange={handleInputChange}\r\n                  required\r\n                  min=\"0\"\r\n                  step=\"0.01\"\r\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                />\r\n              </div>\r\n\r\n              {/* Payment Status */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Payment Status *\r\n                </label>\r\n                <select\r\n                  name=\"payState\"\r\n                  value={ticketData.payState}\r\n                  onChange={handleInputChange}\r\n                  required\r\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                >\r\n                  <option value=\"PENDING\">Pending</option>\r\n                  <option value=\"PAID\">Paid</option>\r\n                  <option value=\"CANCELLED\">Cancelled</option>\r\n                </select>\r\n              </div>\r\n\r\n              {/* Date */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Booking Date *\r\n                </label>\r\n                <input\r\n                  type=\"date\"\r\n                  name=\"date\"\r\n                  value={ticketData.date}\r\n                  onChange={handleInputChange}\r\n                  required\r\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {/* Schedule Info Display */}\r\n            {selectedScheduleInfo && (\r\n              <div className=\"mt-6 p-4 bg-gray-50 rounded-lg\">\r\n                <h4 className=\"font-medium text-gray-700 mb-2\">Selected Schedule Details:</h4>\r\n                <div className=\"grid grid-cols-2 gap-4 text-sm text-gray-600\">\r\n                  <div>Bus: {selectedScheduleInfo.bus?.plateNumber}</div>\r\n                  <div>Capacity: {selectedScheduleInfo.bus?.capacity || selectedScheduleInfo.bus?.busSeat}</div>\r\n                  <div>Available Seats: {availableSeats.length}</div>\r\n                  <div>Price: {selectedScheduleInfo.price || 0} RWF</div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Form Actions */}\r\n            <div className=\"flex justify-end space-x-4 pt-6 border-t border-gray-200 mt-6\">\r\n              <button\r\n                type=\"button\"\r\n                onClick={handleCancel}\r\n                className=\"px-6 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors\"\r\n              >\r\n                Cancel\r\n              </button>\r\n              <button\r\n                type=\"submit\"\r\n                className=\"px-6 py-3 bg-black text-white rounded-lg hover:bg-gray-700 transition-colors disabled:bg-gray-400\"\r\n                disabled={availableSeats.length === 0 || !ticketData.schedule}\r\n              >\r\n                <i className=\"fas fa-save mr-2\"></i> \r\n                Save Ticket & Generate PDF\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}