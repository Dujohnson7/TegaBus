{"ast":null,"code":"var _jsxFileName = \"D:\\\\AUCA\\\\AUCA INNOVATION CENTER\\\\WebTech\\\\Final\\\\TegaBus\\\\frontend\\\\tegaPortal\\\\src\\\\components\\\\Cards\\\\CardLineChart.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from \"react\";\nimport Chart from \"chart.js\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function CardLineChart({\n  chartData,\n  title = \"Revenue\",\n  startDate,\n  endDate\n}) {\n  _s();\n  const [isLoading, setIsLoading] = useState(false);\n  const [data, setData] = useState(chartData || {\n    labels: [],\n    datasets: []\n  });\n  const [currentStartDate, setCurrentStartDate] = useState(\"\");\n  const [currentEndDate, setCurrentEndDate] = useState(\"\");\n  const chartRef = useRef(null);\n  const chartInstance = useRef(null);\n\n  // Function to get current week range (Sunday to Saturday)\n  const getCurrentWeekRange = () => {\n    const today = new Date();\n    const dayOfWeek = today.getDay(); // 0 = Sunday, 1 = Monday, ..., 6 = Saturday\n\n    // Calculate start of week (Sunday)\n    const start = new Date(today);\n    start.setDate(today.getDate() - dayOfWeek);\n    start.setHours(0, 0, 0, 0);\n\n    // Calculate end of week (Saturday)\n    const end = new Date(today);\n    end.setDate(today.getDate() + (6 - dayOfWeek));\n    end.setHours(23, 59, 59, 999);\n    return {\n      start: start.toISOString().split('T')[0],\n      end: end.toISOString().split('T')[0],\n      startMillis: start.getTime(),\n      endMillis: end.getTime()\n    };\n  };\n  useEffect(() => {\n    // Set default to current week if no dates provided\n    if (!startDate || !endDate) {\n      const weekRange = getCurrentWeekRange();\n      setCurrentStartDate(weekRange.start);\n      setCurrentEndDate(weekRange.end);\n    } else {\n      setCurrentStartDate(startDate);\n      setCurrentEndDate(endDate);\n    }\n  }, [startDate, endDate]);\n  useEffect(() => {\n    if (chartData) {\n      setData(chartData);\n    } else if (currentStartDate && currentEndDate) {\n      fetchChartData();\n    }\n  }, [chartData, currentStartDate, currentEndDate]);\n  const fetchChartData = async () => {\n    try {\n      setIsLoading(true);\n      const startMillis = new Date(currentStartDate).getTime();\n      const endMillis = new Date(currentEndDate).getTime();\n      const token = localStorage.getItem(\"token\");\n      const response = await fetch(`http://localhost:5000/api/reports/date-range?start=${startMillis}&end=${endMillis}`, {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": `Bearer ${token}`\n        }\n      });\n      if (!response.ok) {\n        throw new Error(\"Failed to fetch chart data\");\n      }\n      const reportData = await response.json();\n      processChartData(reportData);\n    } catch (error) {\n      console.error(\"Error fetching chart data:\", error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const processChartData = reportData => {\n    // Group tickets by Date only\n    const groupedByDate = {};\n    reportData.forEach(t => {\n      const date = new Date(t.date).toLocaleDateString();\n      if (!groupedByDate[date]) {\n        groupedByDate[date] = {\n          date,\n          revenue: 0\n        };\n      }\n      groupedByDate[date].revenue += t.totalAmount || 0;\n    });\n    const groupedData = Object.values(groupedByDate);\n    const sortedData = groupedData.sort((a, b) => new Date(a.date) - new Date(b.date));\n    const labels = sortedData.map(r => r.date);\n\n    // Revenue chart data\n    const revenueChart = {\n      labels,\n      datasets: [{\n        label: \"Revenue (RWF)\",\n        data: sortedData.map(r => r.revenue),\n        borderColor: \"rgb(59,130,246)\",\n        backgroundColor: \"rgba(59,130,246,0.1)\",\n        tension: 0.4\n      }]\n    };\n    setData(revenueChart);\n  };\n\n  // Function to get day name from date string\n  const getDayName = dateString => {\n    const date = new Date(dateString);\n    return date.toLocaleDateString('en-US', {\n      weekday: 'long'\n    });\n  };\n  useEffect(() => {\n    if (data.labels.length === 0 || !chartRef.current) return;\n\n    // Destroy previous chart if it exists\n    if (chartInstance.current) {\n      chartInstance.current.destroy();\n    }\n    var config = {\n      type: \"line\",\n      data: data,\n      options: {\n        maintainAspectRatio: false,\n        responsive: true,\n        title: {\n          display: true,\n          text: `${title} - Week of ${currentStartDate} to ${currentEndDate}`,\n          fontColor: \"white\",\n          fontSize: 16\n        },\n        legend: {\n          labels: {\n            fontColor: \"white\"\n          },\n          align: \"end\",\n          position: \"bottom\"\n        },\n        tooltips: {\n          mode: \"index\",\n          intersect: false,\n          callbacks: {\n            title: function (tooltipItems, data) {\n              const date = tooltipItems[0].xLabel;\n              return `${date} (${getDayName(date)})`;\n            },\n            label: function (tooltipItem, data) {\n              return data.datasets[tooltipItem.datasetIndex].label + ': ' + tooltipItem.yLabel.toLocaleString() + (title === \"Revenue\" ? ' RWF' : '');\n            }\n          }\n        },\n        hover: {\n          mode: \"nearest\",\n          intersect: true\n        },\n        scales: {\n          xAxes: [{\n            ticks: {\n              fontColor: \"rgba(255,255,255,.7)\",\n              callback: function (value) {\n                // Show date with day abbreviation\n                const date = new Date(value);\n                return `${date.toLocaleDateString()} (${date.toLocaleDateString('en-US', {\n                  weekday: 'short'\n                })})`;\n              }\n            },\n            display: true,\n            scaleLabel: {\n              display: false,\n              labelString: \"Date\",\n              fontColor: \"white\"\n            },\n            gridLines: {\n              display: false,\n              borderDash: [2],\n              borderDashOffset: [2],\n              color: \"rgba(33, 37, 41, 0.3)\",\n              zeroLineColor: \"rgba(0, 0, 0, 0)\",\n              zeroLineBorderDash: [2],\n              zeroLineBorderDashOffset: [2]\n            }\n          }],\n          yAxes: [{\n            ticks: {\n              fontColor: \"rgba(255,255,255,.7)\",\n              beginAtZero: true,\n              callback: function (value) {\n                return value.toLocaleString() + (title === \"Revenue\" ? ' RWF' : '');\n              }\n            },\n            display: true,\n            scaleLabel: {\n              display: false,\n              labelString: title,\n              fontColor: \"white\"\n            },\n            gridLines: {\n              borderDash: [3],\n              borderDashOffset: [3],\n              drawBorder: false,\n              color: \"rgba(255, 255, 255, 0.15)\",\n              zeroLineColor: \"rgba(33, 37, 41, 0)\",\n              zeroLineBorderDash: [2],\n              zeroLineBorderDashOffset: [2]\n            }\n          }]\n        }\n      }\n    };\n    const ctx = chartRef.current.getContext(\"2d\");\n    chartInstance.current = new Chart(ctx, config);\n\n    // Cleanup function\n    return () => {\n      if (chartInstance.current) {\n        chartInstance.current.destroy();\n      }\n    };\n  }, [data, title, currentStartDate, currentEndDate]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative flex flex-col min-w-0 break-words w-full mb-6 shadow-lg rounded bg-blueGray-700\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"rounded-t mb-0 px-4 py-3 bg-transparent\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-wrap items-center\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative w-full max-w-full flex-grow flex-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n              className: \"uppercase text-blueGray-100 mb-1 text-xs font-semibold\",\n              children: \"Overview\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 252,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-white text-xl font-semibold\",\n              children: [title, \" - \", currentStartDate, \" to \", currentEndDate, /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm ml-2 text-blueGray-300\",\n                children: [\"(\", getDayName(currentStartDate), \" to \", getDayName(currentEndDate), \")\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 257,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-4 flex-auto\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative h-350-px\",\n          children: isLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-center h-full\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-white\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-spinner fa-spin mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 270,\n                columnNumber: 19\n              }, this), \"Loading chart data...\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 269,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 15\n          }, this) : data.labels.length > 0 ? /*#__PURE__*/_jsxDEV(\"canvas\", {\n            ref: chartRef,\n            id: \"line-chart\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-center h-full\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-white text-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-chart-line text-2xl mb-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 279,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"No data available for this week\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 280,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm\",\n                children: [\"Week: \", currentStartDate, \" to \", currentEndDate]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 281,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n_s(CardLineChart, \"R7R2EQ6Dp7xJ/AstvZilGUTsEeQ=\");\n_c = CardLineChart;\nvar _c;\n$RefreshReg$(_c, \"CardLineChart\");","map":{"version":3,"names":["React","useState","useEffect","useRef","Chart","jsxDEV","_jsxDEV","Fragment","_Fragment","CardLineChart","chartData","title","startDate","endDate","_s","isLoading","setIsLoading","data","setData","labels","datasets","currentStartDate","setCurrentStartDate","currentEndDate","setCurrentEndDate","chartRef","chartInstance","getCurrentWeekRange","today","Date","dayOfWeek","getDay","start","setDate","getDate","setHours","end","toISOString","split","startMillis","getTime","endMillis","weekRange","fetchChartData","token","localStorage","getItem","response","fetch","method","headers","ok","Error","reportData","json","processChartData","error","console","groupedByDate","forEach","t","date","toLocaleDateString","revenue","totalAmount","groupedData","Object","values","sortedData","sort","a","b","map","r","revenueChart","label","borderColor","backgroundColor","tension","getDayName","dateString","weekday","length","current","destroy","config","type","options","maintainAspectRatio","responsive","display","text","fontColor","fontSize","legend","align","position","tooltips","mode","intersect","callbacks","tooltipItems","xLabel","tooltipItem","datasetIndex","yLabel","toLocaleString","hover","scales","xAxes","ticks","callback","value","scaleLabel","labelString","gridLines","borderDash","borderDashOffset","color","zeroLineColor","zeroLineBorderDash","zeroLineBorderDashOffset","yAxes","beginAtZero","drawBorder","ctx","getContext","children","className","fileName","_jsxFileName","lineNumber","columnNumber","ref","id","_c","$RefreshReg$"],"sources":["D:/AUCA/AUCA INNOVATION CENTER/WebTech/Final/TegaBus/frontend/tegaPortal/src/components/Cards/CardLineChart.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport Chart from \"chart.js\";\n\nexport default function CardLineChart({ chartData, title = \"Revenue\", startDate, endDate }) {\n  const [isLoading, setIsLoading] = useState(false);\n  const [data, setData] = useState(chartData || { labels: [], datasets: [] });\n  const [currentStartDate, setCurrentStartDate] = useState(\"\");\n  const [currentEndDate, setCurrentEndDate] = useState(\"\");\n  const chartRef = useRef(null);\n  const chartInstance = useRef(null);\n\n  // Function to get current week range (Sunday to Saturday)\n  const getCurrentWeekRange = () => {\n    const today = new Date();\n    const dayOfWeek = today.getDay(); // 0 = Sunday, 1 = Monday, ..., 6 = Saturday\n    \n    // Calculate start of week (Sunday)\n    const start = new Date(today);\n    start.setDate(today.getDate() - dayOfWeek);\n    start.setHours(0, 0, 0, 0);\n    \n    // Calculate end of week (Saturday)\n    const end = new Date(today);\n    end.setDate(today.getDate() + (6 - dayOfWeek));\n    end.setHours(23, 59, 59, 999);\n    \n    return {\n      start: start.toISOString().split('T')[0],\n      end: end.toISOString().split('T')[0],\n      startMillis: start.getTime(),\n      endMillis: end.getTime()\n    };\n  };\n\n  useEffect(() => {\n    // Set default to current week if no dates provided\n    if (!startDate || !endDate) {\n      const weekRange = getCurrentWeekRange();\n      setCurrentStartDate(weekRange.start);\n      setCurrentEndDate(weekRange.end);\n    } else {\n      setCurrentStartDate(startDate);\n      setCurrentEndDate(endDate);\n    }\n  }, [startDate, endDate]);\n\n  useEffect(() => {\n    if (chartData) {\n      setData(chartData);\n    } else if (currentStartDate && currentEndDate) {\n      fetchChartData();\n    }\n  }, [chartData, currentStartDate, currentEndDate]);\n\n  const fetchChartData = async () => {\n    try {\n      setIsLoading(true);\n      const startMillis = new Date(currentStartDate).getTime();\n      const endMillis = new Date(currentEndDate).getTime();\n      \n      const token = localStorage.getItem(\"token\");\n      const response = await fetch(\n        `http://localhost:5000/api/reports/date-range?start=${startMillis}&end=${endMillis}`,\n        {\n          method: \"GET\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            \"Authorization\": `Bearer ${token}`,\n          },\n        }\n      );\n\n      if (!response.ok) {\n        throw new Error(\"Failed to fetch chart data\");\n      }\n\n      const reportData = await response.json();\n      processChartData(reportData);\n    } catch (error) {\n      console.error(\"Error fetching chart data:\", error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const processChartData = (reportData) => {\n    // Group tickets by Date only\n    const groupedByDate = {};\n    reportData.forEach((t) => {\n      const date = new Date(t.date).toLocaleDateString();\n      \n      if (!groupedByDate[date]) {\n        groupedByDate[date] = {\n          date,\n          revenue: 0,\n        };\n      }\n\n      groupedByDate[date].revenue += t.totalAmount || 0;\n    });\n\n    const groupedData = Object.values(groupedByDate);\n    const sortedData = groupedData.sort(\n      (a, b) => new Date(a.date) - new Date(b.date)\n    );\n    \n    const labels = sortedData.map((r) => r.date);\n\n    // Revenue chart data\n    const revenueChart = {\n      labels,\n      datasets: [\n        {\n          label: \"Revenue (RWF)\",\n          data: sortedData.map((r) => r.revenue),\n          borderColor: \"rgb(59,130,246)\",\n          backgroundColor: \"rgba(59,130,246,0.1)\",\n          tension: 0.4,\n        },\n      ],\n    };\n    \n    setData(revenueChart);\n  };\n\n  // Function to get day name from date string\n  const getDayName = (dateString) => {\n    const date = new Date(dateString);\n    return date.toLocaleDateString('en-US', { weekday: 'long' });\n  };\n\n  useEffect(() => {\n    if (data.labels.length === 0 || !chartRef.current) return;\n\n    // Destroy previous chart if it exists\n    if (chartInstance.current) {\n      chartInstance.current.destroy();\n    }\n\n    var config = {\n      type: \"line\",\n      data: data,\n      options: {\n        maintainAspectRatio: false,\n        responsive: true,\n        title: {\n          display: true,\n          text: `${title} - Week of ${currentStartDate} to ${currentEndDate}`,\n          fontColor: \"white\",\n          fontSize: 16,\n        },\n        legend: {\n          labels: {\n            fontColor: \"white\",\n          },\n          align: \"end\",\n          position: \"bottom\",\n        },\n        tooltips: {\n          mode: \"index\",\n          intersect: false,\n          callbacks: {\n            title: function(tooltipItems, data) {\n              const date = tooltipItems[0].xLabel;\n              return `${date} (${getDayName(date)})`;\n            },\n            label: function(tooltipItem, data) {\n              return data.datasets[tooltipItem.datasetIndex].label + ': ' + \n                tooltipItem.yLabel.toLocaleString() + (title === \"Revenue\" ? ' RWF' : '');\n            }\n          }\n        },\n        hover: {\n          mode: \"nearest\",\n          intersect: true,\n        },\n        scales: {\n          xAxes: [\n            {\n              ticks: {\n                fontColor: \"rgba(255,255,255,.7)\",\n                callback: function(value) {\n                  // Show date with day abbreviation\n                  const date = new Date(value);\n                  return `${date.toLocaleDateString()} (${date.toLocaleDateString('en-US', { weekday: 'short' })})`;\n                }\n              },\n              display: true,\n              scaleLabel: {\n                display: false,\n                labelString: \"Date\",\n                fontColor: \"white\",\n              },\n              gridLines: {\n                display: false,\n                borderDash: [2],\n                borderDashOffset: [2],\n                color: \"rgba(33, 37, 41, 0.3)\",\n                zeroLineColor: \"rgba(0, 0, 0, 0)\",\n                zeroLineBorderDash: [2],\n                zeroLineBorderDashOffset: [2],\n              },\n            },\n          ],\n          yAxes: [\n            {\n              ticks: {\n                fontColor: \"rgba(255,255,255,.7)\",\n                beginAtZero: true,\n                callback: function(value) {\n                  return value.toLocaleString() + (title === \"Revenue\" ? ' RWF' : '');\n                }\n              },\n              display: true,\n              scaleLabel: {\n                display: false,\n                labelString: title,\n                fontColor: \"white\",\n              },\n              gridLines: {\n                borderDash: [3],\n                borderDashOffset: [3],\n                drawBorder: false,\n                color: \"rgba(255, 255, 255, 0.15)\",\n                zeroLineColor: \"rgba(33, 37, 41, 0)\",\n                zeroLineBorderDash: [2],\n                zeroLineBorderDashOffset: [2],\n              },\n            },\n          ],\n        },\n      },\n    };\n    \n    const ctx = chartRef.current.getContext(\"2d\");\n    chartInstance.current = new Chart(ctx, config);\n    \n    // Cleanup function\n    return () => {\n      if (chartInstance.current) {\n        chartInstance.current.destroy();\n      }\n    };\n  }, [data, title, currentStartDate, currentEndDate]);\n\n  return (\n    <>\n      <div className=\"relative flex flex-col min-w-0 break-words w-full mb-6 shadow-lg rounded bg-blueGray-700\">\n        <div className=\"rounded-t mb-0 px-4 py-3 bg-transparent\">\n          <div className=\"flex flex-wrap items-center\">\n            <div className=\"relative w-full max-w-full flex-grow flex-1\">\n              <h6 className=\"uppercase text-blueGray-100 mb-1 text-xs font-semibold\">\n                Overview\n              </h6>\n              <h2 className=\"text-white text-xl font-semibold\">\n                {title} - {currentStartDate} to {currentEndDate}\n                <span className=\"text-sm ml-2 text-blueGray-300\">\n                  ({getDayName(currentStartDate)} to {getDayName(currentEndDate)})\n                </span>\n              </h2>\n            </div>\n          </div>\n        </div>\n        <div className=\"p-4 flex-auto\">\n          {/* Chart */}\n          <div className=\"relative h-350-px\">\n            {isLoading ? (\n              <div className=\"flex items-center justify-center h-full\">\n                <div className=\"text-white\">\n                  <i className=\"fas fa-spinner fa-spin mr-2\"></i>\n                  Loading chart data...\n                </div>\n              </div>\n            ) : data.labels.length > 0 ? (\n              <canvas ref={chartRef} id=\"line-chart\"></canvas>\n            ) : (\n              <div className=\"flex items-center justify-center h-full\">\n                <div className=\"text-white text-center\">\n                  <i className=\"fas fa-chart-line text-2xl mb-2\"></i>\n                  <p>No data available for this week</p>\n                  <p className=\"text-sm\">Week: {currentStartDate} to {currentEndDate}</p>\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}